# 内存优化指南 - LZ小工具网站

为了在内存有限的环境（如8GB RAM的电脑）上顺利运行LZ小工具网站项目，本文档提供了一系列优化技巧和解决方案。

## 运行项目的优化方法

### 1. 使用优化启动脚本

我们提供了两个批处理文件来优化启动过程：

- `start-dev.bat` - 优化的开发环境启动脚本
- `build-prod.bat` - 优化的生产环境构建脚本

这些脚本自动设置内存限制并清理缓存，帮助减少内存占用。

### 2. 手动启动项目

如果您想手动启动项目，请按照以下步骤操作：

```bash
# 清理缓存
npm run clean

# 启动开发服务器（优化内存使用）
npm run dev:fast
```

### 3. 关闭其他应用程序

在运行项目时，建议关闭其他内存密集型应用程序，如：
- 浏览器（特别是有多个标签页的）
- 视频编辑软件
- 其他开发环境或IDE
- 大型游戏或应用程序

## 项目中已实施的内存优化措施

### 1. Next.js配置优化

在`next.config.js`中，我们已经应用了以下优化：

- 禁用TypeScript检查（开发时）
- 禁用ESLint检查（开发时）
- 禁用图像优化功能
- 禁用源码映射
- 优化Webpack缓存配置
- 启用Webpack构建工作线程

### 2. 代码优化

- 减少了不必要的依赖项
- 避免使用内存密集型操作
- 优化了组件的渲染和重新渲染

## 故障排除

如果仍然遇到内存问题，尝试以下方法：

### 1. 增加虚拟内存

在Windows系统中，您可以增加虚拟内存大小：
1. 打开"系统属性" > "高级" > "性能设置" > "高级" > "虚拟内存"
2. 取消选中"自动管理分页文件大小"
3. 选择"自定义大小"并增加初始大小和最大大小（建议设置为物理RAM的1.5-2倍）

### 2. 使用生产模式运行

生产模式通常比开发模式消耗更少的内存：

```bash
npm run build
npm start
```

### 3. 分阶段开发

如果在开发特定功能时遇到内存问题，可以尝试：
1. 暂时注释掉其他功能组件
2. 完成当前功能开发后再恢复其他组件
3. 专注于开发单个功能，然后再集成

## 参考资料

- [Next.js 官方内存优化指南](https://nextjs.org/docs/app/building-your-application/optimizing/memory-usage)
- [如何防止大型Next.js应用中的内存泄漏](https://medium.com/@mohantaankit2002/how-to-prevent-memory-leaks-in-large-scale-next-js-applications-5226161ccce3) 